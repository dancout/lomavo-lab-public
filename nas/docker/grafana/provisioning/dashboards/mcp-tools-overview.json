{
  "panels": [
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "blue",
            "mode": "fixed"
          }
        }
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 0,
        "y": 0
      },
      "id": 1,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(count_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" [$__range]))",
          "refId": "A"
        }
      ],
      "title": "Total Tool Calls",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "green",
            "mode": "fixed"
          }
        }
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 6,
        "y": 0
      },
      "id": 2,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(count_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/list\" [$__range]))",
          "refId": "A"
        }
      ],
      "title": "Tool Lists",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "red",
            "mode": "fixed"
          },
          "noValue": "0"
        }
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 12,
        "y": 0
      },
      "id": 3,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(count_over_time({container=~\"/mcp-.*\"} | json | event=\"error\" [$__range]))",
          "refId": "A"
        }
      ],
      "title": "Errors",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "purple",
            "mode": "fixed"
          },
          "unit": "ms"
        }
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 18,
        "y": 0
      },
      "id": 4,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "avg_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" | unwrap duration_ms [$__range])",
          "refId": "A"
        }
      ],
      "title": "Avg Response Time",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "bars",
            "fillOpacity": 30,
            "stacking": {
              "mode": "normal"
            }
          }
        }
      },
      "gridPos": {
        "h": 10,
        "w": 12,
        "x": 0,
        "y": 5
      },
      "id": 5,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "targets": [
        {
          "expr": "sum by (container) (count_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" [$__interval]))",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "title": "Tool Calls Over Time (by Server)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10
          },
          "unit": "ms"
        }
      },
      "gridPos": {
        "h": 10,
        "w": 12,
        "x": 12,
        "y": 5
      },
      "id": 6,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "targets": [
        {
          "expr": "avg_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" | unwrap duration_ms [$__interval]) by (container)",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "title": "Response Time Over Time",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "gridPos": {
        "h": 10,
        "w": 8,
        "x": 0,
        "y": 15
      },
      "id": 7,
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right",
          "values": [
            "value",
            "percent"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum by (container) (count_over_time({container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" [$__range]))",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "title": "Calls by Server",
      "type": "piechart"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "P8E80F9AEF21F6940"
      },
      "gridPos": {
        "h": 10,
        "w": 16,
        "x": 8,
        "y": 15
      },
      "id": 8,
      "options": {
        "showHeader": true,
        "sortBy": [
          {
            "desc": true,
            "displayName": "Time"
          }
        ]
      },
      "targets": [
        {
          "expr": "{container=~\"/mcp-.*\"} | json | event=\"tool_call\" | method=\"tools/call\" | line_format \"{{.server}} | {{.tool}} | {{.duration_ms}}ms\"",
          "refId": "A"
        }
      ],
      "title": "Recent Tool Calls",
      "transformations": [
        {
          "id": "extractFields",
          "options": {
            "format": "auto",
            "source": "Line"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "id": true,
              "labels": true,
              "tsNs": true
            }
          }
        }
      ],
      "type": "table"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "tags": [
    "homelab",
    "mcp",
    "overview"
  ],
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timezone": "browser",
  "title": "MCP Tools - Overview",
  "uid": "f72f1dbc-b35a-410a-8307-b2774d9b2bf2"
}
