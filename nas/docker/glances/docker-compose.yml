services:
  glances:
    image: nicolargo/glances:latest-full
    container_name: glances
    restart: unless-stopped
    pid: host
    network_mode: host
    volumes:
      - /var/run/system-docker.sock:/var/run/docker.sock:ro
      - /:/rootfs:ro
      - /sys:/sys:ro
      - /proc:/proc:ro
      - ./glances.conf:/etc/glances/glances.conf:ro
    environment:
      - GLANCES_OPT=-w -C /etc/glances/glances.conf
    # Notes:
    # - QNAP uses /var/run/system-docker.sock (not /var/run/docker.sock)
    # - Mount /:/rootfs:ro to see host filesystem for storage metrics
    # - Storage shows at /rootfs/share/CACHEDEV1_DATA in Glances
    # - /sys and /proc mounts enable hardware sensor access for temperature readings
    # - Custom config disables processlist/programlist (saves ~20% CPU on ARM)
    #   and increases refresh interval to 5s (see glances.conf)
